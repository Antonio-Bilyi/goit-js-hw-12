{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst loaderEl = document.querySelector('.loader');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreEl = document.querySelector('.load-more-button');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\nexport function createGallery(images) {\n    const markup = images\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n            `<li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-img\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n        />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-descr\">Likes: ${likes}</p>\n        <p class=\"info-descr\">Views: ${views}</p>\n        <p class=\"info-descr\">Comments: ${comments}</p>\n        <p class=\"info-descr\">Downloads: ${downloads}</p>\n      </div>\n    </li>`\n        ).join(''); \n    \n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderEl.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loaderEl.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreEl.classList.remove('hidden');    \n}\nexport function hideLoadMoreButton() {\n    loadMoreEl.classList.add('hidden');\n}\n\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '50309371-d07515f8c9a862bfe72f170ff';\nexport const PAGE_SIZE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                page,\n                per_page: PAGE_SIZE,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport {\n    createGallery, clearGallery, showLoader,\n    hideLoader, showLoadMoreButton, hideLoadMoreButton,\n} from \"./js/render-functions\";\nimport { getImagesByQuery, PAGE_SIZE } from \"./js/pixabay-api\";\n\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreEl = document.querySelector('.load-more-button');\n\nlet query;\nlet page = 1;\nlet maxPage = 0;\n\nfunction scrollNextImages() {\n    const firstImage = document.querySelector('.gallery-item');\n\n    if (!firstImage) return;\n\n    const imageHeight = firstImage.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: imageHeight * 2,\n        behavior: \"smooth\",\n    })\n\n}\n\nformEl.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    clearGallery();\n\n    query = e.target.elements['search-text'].value.trim();\n    page = 1;\n\n    if (query === '') {\n        iziToast.warning({\n          title: 'Attentione',\n          message: 'The field cannot be empty!',\n          position: 'topRight'\n        });\n        return;\n    }\n\n    showLoader();\n\n    try {\n        const res = await getImagesByQuery(query, page);\n        const images = res.hits;\n\n        if (images.length === 0) {\n            iziToast.warning({\n                title: 'Sorry',\n                message: 'There are no images matching your search query. Please try again!',\n                position: 'topRight',\n                timeout: 3000,\n            });\n\n            hideLoadMoreButton();\n\n            return;\n        }\n\n        createGallery(images);\n\n        maxPage = Math.ceil(res.totalHits / PAGE_SIZE);\n      \n        if (page < maxPage) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n\n            iziToast.warning({\n                title: 'Sorry',\n                message: 'We are sorry, but you have reached the end of search results',\n                position: 'topRight',\n                timeout: 3000,\n            });\n        }\n   } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n            position: 'topRight',\n        });\n        console.error(error);\n    } finally {\n        hideLoader();\n\n        e.target.reset();\n    }\n});\n\nloadMoreEl.addEventListener('click', async e => {\n    page += 1;\n\n    showLoader();\n\n    try {\n        const res = await getImagesByQuery(query, page);\n        const images = res.hits;\n\n        createGallery(images);\n\n        scrollNextImages();\n    \n        if (page < maxPage) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n\n            iziToast.warning({\n                title: 'Sorry',\n                message: 'We are sorry, but you have reached the end of search results',\n                position: 'topRight',\n                timeout: 3000,\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n            position: 'topRight',\n        });\n        console.error(error);\n    } finally {\n        hideLoader();\n    }\n});"],"names":["loaderEl","galleryEl","loadMoreEl","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASE_URL","API_KEY","PAGE_SIZE","getImagesByQuery","query","page","axios","error","formEl","maxPage","scrollNextImages","firstImage","imageHeight","e","iziToast","res"],"mappings":"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"}